(this.webpackJsonpapiconnection=this.webpackJsonpapiconnection||[]).push([[0],{11:function(t,e,n){t.exports={content:"BusContent_content__3JHnj",c1:"BusContent_c1__3UTmU",Select:"BusContent_Select__2OYzI"}},12:function(t,e,n){t.exports={NavB:"NavBar_NavB__2LOmq",List:"NavBar_List__3SHpe"}},17:function(t,e,n){t.exports={card:"Card_card__2nKG4"}},22:function(t,e,n){},23:function(t,e,n){},30:function(t,e,n){"use strict";n.r(e);var c=n(0),a=n.n(c),u=n(4),r=n.n(u),s=(n(22),n(23),n(10)),i=n.n(s),o=n(13),l=n(16),j=n(3),b=n(11),O=n.n(b),f=n(17),d=n.n(f),h=n(1),A=function(t){return Object(h.jsx)("div",{className:d.a.card,children:t.children})},m=n(8),x=n.n(m),g=function(t){var e=Math.floor(t.remaining/1e3),n=Math.floor(e/60),c=Object(h.jsxs)("div",{children:["\u5269\u4e0b:",n,"\u5206\u9418"]});0===n?c=Object(h.jsx)("div",{children:"\u5373\u5c07\u5230\u9054"}):n<0&&(c=Object(h.jsx)("div",{children:"NA"}));var a=t.minutes;return t.minutes<10&&(a="0".concat(t.minutes)),Object(h.jsxs)("li",{className:x.a.bus,children:[Object(h.jsx)("h3",{children:t.busroute}),Object(h.jsxs)("div",{className:x.a.hour,children:["\u62b5\u9054\u6642\u9593: ",t.hours," : ",a]}),Object(h.jsx)("div",{className:x.a.remaining,children:c})]})},v=n(14),p=n(6);n(26).config();var B={width:"400px",height:"400px"};function S(t){var e=t.data[0],n=Math.floor(e/1e3),u={lat:22.45313,lng:114.003812},r={lat:22.452213,lng:114.002155},s=(u.lat-r.lat)/14,i=Object(c.useState)(u),o=Object(j.a)(i,2),l=o[0],b=o[1],O=Object(c.useState)({}),f=Object(j.a)(O,2),d=f[0],A=f[1],m=Object(c.useState)(),x=Object(j.a)(m,2),g=x[0],S=x[1],E=Object(c.useState)(!1),C=Object(j.a)(E,2),N=(C[0],C[1],Object(c.useState)(null)),k=Object(j.a)(N,2),T=k[0],U=k[1],D=Object(p.c)({id:"google-map-script",googleMapsApiKey:"AIzaSyBLrU_zN23HcZsijnL6KJOP5myQ89JSomU"}).isLoaded,I=a.a.useState(null),_=Object(j.a)(I,2),w=(_[0],_[1]),Q=a.a.useCallback((function(t){var e=new window.google.maps.LatLngBounds;t.fitBounds(e),w(t)}),[]),L=a.a.useCallback((function(t){w(null)}),[]);return Object(c.useEffect)((function(){var t=setTimeout((function(){A({lat:22.452259,lng:114.002123}),S(17)}),200);return function(){return clearTimeout(t)}}),[t.value]),Object(c.useEffect)((function(){var t=setTimeout((function(){S(17)}),250);return function(){return clearTimeout(t)}}),[]),Object(c.useEffect)((function(){var t=setInterval((function(){b((function(t){return Object(v.a)(Object(v.a)({},t),{},{lat:t.lat-s,lng:(u.lng*(r.lat-(t.lat-s))+r.lng*(t.lat-s-u.lat))/(r.lat-u.lat)})}))}),1e3);return U(t),function(){return clearInterval(t)}}),[t.value]),Object(c.useEffect)((function(){clearInterval(T),b(u)}),[t.value]),l.lat<r.lat&&clearInterval(T),D?Object(h.jsxs)(p.a,{mapContainerStyle:B,center:d,zoom:g,onLoad:Q,onUnmount:L,children:[Object(h.jsx)(p.b,{position:r}),Object(h.jsx)(p.b,{position:l,visible:n<500&&n>0,label:t.value}),Object(h.jsx)(h.Fragment,{})]}):Object(h.jsx)(h.Fragment,{})}var E=a.a.memo(S),C=function(t){var e=Object(c.useState)([]),n=Object(j.a)(e,2),a=n[0],u=n[1],r=Object(c.useState)(),s=Object(j.a)(r,2),b=s[0],f=s[1],d=Object(c.useState)([]),m=Object(j.a)(d,2),x=m[0],v=m[1],p=Object(c.useState)(!1),B=Object(j.a)(p,2),S=B[0],C=B[1],N=Object(c.useState)(null),k=Object(j.a)(N,2),T=k[0],U=k[1],D=Object(c.useState)(""),I=Object(j.a)(D,2),_=I[0],w=I[1],Q=Object(c.useState)(!1),L=Object(j.a)(Q,2),M=L[0],R=L[1],J=Object(c.useState)([]),K=Object(j.a)(J,2),Y=K[0],y=K[1],G=new Date;function H(){return X.apply(this,arguments)}function X(){return(X=Object(l.a)(i.a.mark((function e(){var n,c,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(G),v([]),e.prev=2,e.next=5,fetch(t.url);case 5:return n=e.sent,e.next=8,n.json();case 8:if(c=e.sent,n.ok){e.next=11;break}throw new Error("No");case 11:a=c.data.map((function(t){return{BusEta:new Date(t.eta),busRoute:t.route}})),C(!0),u(a),v((function(t){return[].concat(Object(o.a)(t),[a[0].busRoute])})),f(void 0===b?a[0].busRoute:b),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),U(e.t0.message);case 21:case"end":return e.stop()}}),e,null,[[2,18]])})))).apply(this,arguments)}var q=x.map((function(t){return Object(h.jsx)("option",{value:t,children:t})}));Object(c.useEffect)((function(){H()}),[]),Object(c.useEffect)((function(){!function(){for(var t=function(t){a[t].busRoute!==a[t-1].busRoute&&v((function(e){return[].concat(Object(o.a)(e),[a[t].busRoute])}))},e=1;e<a.length;e++)t(e)}(),function(){var t=new Set(a.map((function(t){return JSON.stringify(t)}))),e=Array.from(t).map((function(t){return JSON.parse(t)}));e.map((function(t){return t.BusEta=new Date(t.BusEta)})),y(e)}()}),[a]);var F=Object(h.jsx)("p",{children:"no Found"});return S&&a.length>0&&(F=Y.filter((function(t){return t.busRoute===b})).map((function(t){return Object(h.jsx)(g,{busroute:t.busRoute,hours:t.BusEta.getHours(),minutes:t.BusEta.getMinutes(),remaining:t.BusEta.getTime()-_.getTime()})}))),T&&(F=Object(h.jsx)("p",{children:T})),Object(h.jsxs)("div",{className:O.a.content,children:[Object(h.jsx)("h1",{children:"\u5929\u8000\u5df4\u58eb\u7ad9\u8def\u7dda"}),Object(h.jsx)(E,{data:a.filter((function(t){return t.busRoute===b})).map((function(t){return t.BusEta.getTime()-_.getTime()})),time:_,changed:M,value:b}),Object(h.jsx)("button",{onClick:H,children:"\u66f4\u65b0"}),Object(h.jsx)("h1",{children:"\u8acb\u9078\u53d6\u4f60\u8981\u67e5\u8a62\u7684\u8def\u7dda"}),Object(h.jsx)("select",{className:O.a.Select,onChange:function(t){f(t.target.value),R(!0)},value:b,children:q}),Object(h.jsx)(A,{children:Object(h.jsx)("ul",{children:F})})]})},N=n(12),k=n.n(N),T=function(){return Object(h.jsxs)("nav",{className:k.a.NavB,children:[Object(h.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAAeCAYAAAC7Q5mxAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAD2EAAA9hAag/p2kAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTnU1rJkAAACkklEQVRoQ+1ZwVHDMBBMCTSQiFfs8IESKIESKCElpARKSAmUQAl0ADOxhy8dGK0uIopyOesUM4kcdmYHiFfSaVlLsjMBvkx125pqxbEx1bMTRWjM3QOnB30b/OSua4hxUvvias2pAW02pnrcdnEUXdfRLxC3pu44NrP5G6n2gc85PbFa9WvS2Zj6JbWvzXT+6U0HTqphWn+3s/kaAdt2t4dsAyU9Bv0w9zfQDWUgCGO4zzlC6wq1GKQGOycu3dkGykVR+oAhDdTy99YfsIbYxCwDW7N44nSOQfqAcxqIOf1FDb5fIMtA+VbapQ8YpYHB8qA2kHY0XhenD7h4A6f1O66HxDxYbUC/PKgNlNLHLbKuIEYL+gmGoGMEr4/TDaT0r60BEINCXEKnMlDqNIx1iFINBJBOrg2RalEZqE0fULKBUjtLXQJz0geUaiDWcmktVK+BOekDSjCQ5o5xdxTna/tzg1skGShRSh9QgoHymBGjk8bJBnKTCjEqA+2mEh/T/hOYaCD6cANGSDMQ27mwoHJGeIzFQBD9ZCXQFTCbr7lrjvYa9XKIMRnoaIMUvipLNhCNuGuex96XlWAgasdPT3dkkx7ngo0k2UBo3K3MXCceTg4owUDXUYS+wPi7TmXg1T3KScuWJZKrMhCQos0dqIs20D6uxfqIS7WB+G6C04ChzqNsA4UXx5bwQm0gfXvH68B4M9EWjxSjDUsu4dsvm1hud8sUDQcpLCDaqw0E8Denc4yONJJW+u+fG30vE4jVKs9AYTOhQXEbEqWHclqkd9qLYq954OIpy0AgbYAR084fPmQb2Lc+XAH1r/RD9G0mo2awzmcbCGxm9SunHzPhhfp94DED+85JYyI2Q+4Y1XXd5Ac9C1Jx8i7MFQAAAABJRU5ErkJggg==",alt:"KMB Logo"}),Object(h.jsxs)("ul",{className:k.a.List,children:[Object(h.jsx)("li",{children:"\u4e3b\u9801"}),Object(h.jsx)("li",{children:"\u4e5d\u5df4\u7db2\u9801\u9023\u7d50"}),Object(h.jsx)("li",{children:"\u4e3b\u9801"})]})]})},U="https://data.etabus.gov.hk/v1/transport/kmb/stop-eta/".concat("7898B605E39613A8");var D=function(){return Object(h.jsxs)(a.a.Fragment,{children:[Object(h.jsx)(T,{}),Object(h.jsx)(C,{url:U}),Object(h.jsx)("footer",{children:"This is devloped by me"})]})},I=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,31)).then((function(e){var n=e.getCLS,c=e.getFID,a=e.getFCP,u=e.getLCP,r=e.getTTFB;n(t),c(t),a(t),u(t),r(t)}))};r.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(D,{})}),document.getElementById("root")),I()},8:function(t,e,n){t.exports={bus:"BusItem_bus__20ujH",hour:"BusItem_hour__3desg",remaining:"BusItem_remaining__3UTKM"}}},[[30,1,2]]]);
//# sourceMappingURL=main.93cf17da.chunk.js.map