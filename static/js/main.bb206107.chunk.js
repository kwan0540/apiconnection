(this.webpackJsonpapiconnection=this.webpackJsonpapiconnection||[]).push([[0],{11:function(e,t,n){e.exports={content:"BusContent_content__3JHnj",c1:"BusContent_c1__3UTmU",Select:"BusContent_Select__2OYzI"}},12:function(e,t,n){e.exports={NavB:"NavBar_NavB__2LOmq",List:"NavBar_List__3SHpe"}},17:function(e,t,n){e.exports={card:"Card_card__2nKG4"}},22:function(e,t,n){},23:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),s=n(4),u=n.n(s),o=(n(22),n(23),n(10)),r=n.n(o),i=n(13),l=n(16),j=n(3),b=n(11),O=n.n(b),f=n(17),d=n.n(f),h=n(1),g=function(e){return Object(h.jsx)("div",{className:d.a.card,children:e.children})},A=n(8),m=n.n(A),x=function(e){var t=Math.floor(e.remaining/1e3),n=Math.floor(t/60),c=Object(h.jsxs)("div",{children:["\u5269\u4e0b:",n,"\u5206\u9418"]});0===n?c=Object(h.jsx)("div",{children:"\u5373\u5c07\u5230\u9054"}):n<0&&(c=Object(h.jsx)("div",{children:"NA"}));var a=e.minutes;return e.minutes<10&&(a="0".concat(e.minutes)),Object(h.jsxs)("li",{className:m.a.bus,children:[Object(h.jsx)("h3",{children:e.busroute}),Object(h.jsxs)("div",{className:m.a.hour,children:["\u62b5\u9054\u6642\u9593: ",e.hours," : ",a]}),Object(h.jsx)("div",{className:m.a.remaining,children:c})]})},v=n(14),p=n(6);n(26).config();var B={width:"400px",height:"400px"};function S(e){var t=e.data[0],n=Math.floor(t/1e3);console.log(n);var s={lat:22.45313,lng:114.003812},u={lat:22.452213,lng:114.002155},o=(s.lat-u.lat)/14,r=Object(c.useState)(s),i=Object(j.a)(r,2),l=i[0],b=i[1],O=Object(c.useState)({}),f=Object(j.a)(O,2),d=f[0],g=f[1],A=Object(c.useState)(),m=Object(j.a)(A,2),x=m[0],S=m[1],E=Object(c.useState)(!1),C=Object(j.a)(E,2),T=(C[0],C[1],Object(c.useState)(null)),k=Object(j.a)(T,2),N=k[0],I=k[1],U=Object(p.c)({id:"google-map-script",googleMapsApiKey:"AIzaSyBLrU_zN23HcZsijnL6KJOP5myQ89JSomU"}).isLoaded,D=a.a.useState(null),_=Object(j.a)(D,2),Q=(_[0],_[1]),L=a.a.useCallback((function(e){var t=new window.google.maps.LatLngBounds;e.fitBounds(t),Q(e)}),[]),M=a.a.useCallback((function(e){Q(null)}),[]);return Object(c.useEffect)((function(){var e=setTimeout((function(){g({lat:22.452259,lng:114.002123})}),200);return function(){return clearTimeout(e)}}),[]),Object(c.useEffect)((function(){var e=setTimeout((function(){S(17)}),250);return function(){return clearTimeout(e)}}),[]),Object(c.useEffect)((function(){var e=setInterval((function(){b((function(e){return Object(v.a)(Object(v.a)({},e),{},{lat:e.lat-o,lng:(s.lng*(u.lat-(e.lat-o))+u.lng*(e.lat-o-s.lat))/(u.lat-s.lat)})}))}),1e3);return I(e),console.log("initiate"),function(){return clearInterval(e)}}),[e.value]),console.log(e.value),Object(c.useEffect)((function(){clearInterval(N),b(s),console.log("clear")}),[e.value]),l.lat<u.lat&&clearInterval(N),U?Object(h.jsxs)(p.a,{mapContainerStyle:B,center:d,zoom:x,onLoad:L,onUnmount:M,children:[Object(h.jsx)(p.b,{position:u}),Object(h.jsx)(p.b,{position:l,visible:n<500&&n>0,label:e.value}),Object(h.jsx)(h.Fragment,{})]}):Object(h.jsx)(h.Fragment,{})}var E=a.a.memo(S),C=function(e){var t=Object(c.useState)([]),n=Object(j.a)(t,2),a=n[0],s=n[1],u=Object(c.useState)(),o=Object(j.a)(u,2),b=o[0],f=o[1],d=Object(c.useState)([]),A=Object(j.a)(d,2),m=A[0],v=A[1],p=Object(c.useState)(!1),B=Object(j.a)(p,2),S=B[0],C=B[1],T=Object(c.useState)(null),k=Object(j.a)(T,2),N=k[0],I=k[1],U=Object(c.useState)(""),D=Object(j.a)(U,2),_=D[0],Q=D[1],L=Object(c.useState)(!1),M=Object(j.a)(L,2),w=M[0],R=M[1],K=Object(c.useState)([]),Y=Object(j.a)(K,2),J=Y[0],y=Y[1],G=new Date;function H(){return X.apply(this,arguments)}function X(){return(X=Object(l.a)(r.a.mark((function t(){var n,c,a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Q(G),v([]),t.prev=2,t.next=5,fetch(e.url);case 5:return n=t.sent,t.next=8,n.json();case 8:if(c=t.sent,n.ok){t.next=11;break}throw new Error("No");case 11:a=c.data.map((function(e){return{key:Math.random(),BusEta:new Date(e.eta),busRoute:e.route}})),console.log(c),C(!0),console.log(a),s(a),v((function(e){return[].concat(Object(i.a)(e),[a[0].busRoute])})),console.log(b),f(void 0===b?a[0].busRoute:b),t.next=24;break;case 21:t.prev=21,t.t0=t.catch(2),I(t.t0.message);case 24:case"end":return t.stop()}}),t,null,[[2,21]])})))).apply(this,arguments)}console.log(J);var q=m.map((function(e){return Object(h.jsx)("option",{value:e,children:e})}));Object(c.useEffect)((function(){H()}),[]),Object(c.useEffect)((function(){!function(){for(var e=function(e){a[e].busRoute!==a[e-1].busRoute&&v((function(t){return[].concat(Object(i.a)(t),[a[e].busRoute])}))},t=1;t<a.length;t++)e(t)}(),function(){var e=a.reduce((function(e,t){var n=e.findIndex((function(e){return e.BusEta.getTime()===t.BusEta.getTime()}));return-1===n?e.push(t):e[n].times++,e}),[]);y(e)}()}),[a]);var F=Object(h.jsx)("p",{children:"no Found"});return S&&a.length>0&&(console.log(a),F=J.filter((function(e){return e.busRoute===b})).map((function(e){return Object(h.jsx)(x,{busroute:e.busRoute,hours:e.BusEta.getHours(),minutes:e.BusEta.getMinutes(),remaining:e.BusEta.getTime()-_.getTime()})}))),N&&(F=Object(h.jsx)("p",{children:N})),Object(h.jsxs)("div",{className:O.a.content,children:[Object(h.jsx)("h1",{children:"\u5929\u8000\u5df4\u58eb\u7ad9\u8def\u7dda"}),Object(h.jsx)(E,{data:a.filter((function(e){return e.busRoute===b})).map((function(e){return e.BusEta.getTime()-_.getTime()})),time:_,changed:w,value:b}),Object(h.jsx)("button",{onClick:H,children:"\u66f4\u65b0"}),Object(h.jsx)("h1",{children:"\u8acb\u9078\u53d6\u4f60\u8981\u67e5\u8a62\u7684\u8def\u7dda"}),Object(h.jsx)("select",{className:O.a.Select,onChange:function(e){f(e.target.value),console.log(b),R(!0)},value:b,children:q}),Object(h.jsx)(g,{children:Object(h.jsx)("ul",{children:F})})]})},T=n(12),k=n.n(T),N=function(){return Object(h.jsxs)("nav",{className:k.a.NavB,children:[Object(h.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAAeCAYAAAC7Q5mxAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAD2EAAA9hAag/p2kAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTnU1rJkAAACkklEQVRoQ+1ZwVHDMBBMCTSQiFfs8IESKIESKCElpARKSAmUQAl0ADOxhy8dGK0uIopyOesUM4kcdmYHiFfSaVlLsjMBvkx125pqxbEx1bMTRWjM3QOnB30b/OSua4hxUvvias2pAW02pnrcdnEUXdfRLxC3pu44NrP5G6n2gc85PbFa9WvS2Zj6JbWvzXT+6U0HTqphWn+3s/kaAdt2t4dsAyU9Bv0w9zfQDWUgCGO4zzlC6wq1GKQGOycu3dkGykVR+oAhDdTy99YfsIbYxCwDW7N44nSOQfqAcxqIOf1FDb5fIMtA+VbapQ8YpYHB8qA2kHY0XhenD7h4A6f1O66HxDxYbUC/PKgNlNLHLbKuIEYL+gmGoGMEr4/TDaT0r60BEINCXEKnMlDqNIx1iFINBJBOrg2RalEZqE0fULKBUjtLXQJz0geUaiDWcmktVK+BOekDSjCQ5o5xdxTna/tzg1skGShRSh9QgoHymBGjk8bJBnKTCjEqA+2mEh/T/hOYaCD6cANGSDMQ27mwoHJGeIzFQBD9ZCXQFTCbr7lrjvYa9XKIMRnoaIMUvipLNhCNuGuex96XlWAgasdPT3dkkx7ngo0k2UBo3K3MXCceTg4owUDXUYS+wPi7TmXg1T3KScuWJZKrMhCQos0dqIs20D6uxfqIS7WB+G6C04ChzqNsA4UXx5bwQm0gfXvH68B4M9EWjxSjDUsu4dsvm1hud8sUDQcpLCDaqw0E8Denc4yONJJW+u+fG30vE4jVKs9AYTOhQXEbEqWHclqkd9qLYq954OIpy0AgbYAR084fPmQb2Lc+XAH1r/RD9G0mo2awzmcbCGxm9SunHzPhhfp94DED+85JYyI2Q+4Y1XXd5Ac9C1Jx8i7MFQAAAABJRU5ErkJggg==",alt:"KMB Logo"}),Object(h.jsxs)("ul",{className:k.a.List,children:[Object(h.jsx)("li",{children:"\u4e3b\u9801"}),Object(h.jsx)("li",{children:"\u4e5d\u5df4\u7db2\u9801\u9023\u7d50"}),Object(h.jsx)("li",{children:"\u4e3b\u9801"})]})]})},I="https://data.etabus.gov.hk/v1/transport/kmb/stop-eta/".concat("7898B605E39613A8");var U=function(){return Object(h.jsxs)(a.a.Fragment,{children:[Object(h.jsx)(N,{}),Object(h.jsx)(C,{url:I}),Object(h.jsx)("footer",{children:"This is devloped by me"})]})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,31)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,u=t.getTTFB;n(e),c(e),a(e),s(e),u(e)}))};u.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(U,{})}),document.getElementById("root")),D()},8:function(e,t,n){e.exports={bus:"BusItem_bus__20ujH",hour:"BusItem_hour__3desg",remaining:"BusItem_remaining__3UTKM"}}},[[30,1,2]]]);
//# sourceMappingURL=main.bb206107.chunk.js.map